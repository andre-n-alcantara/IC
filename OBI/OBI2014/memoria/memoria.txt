Olimpíada Brasileira de Informática – OBI2014 5
Jogo da Memória
Nome do arquivo fonte:memoria.c,memoria.cpp,memoria.pas,memoria.java,oumemoria.pyPedro e Paulo resolveram complicar um pouco o tradicional Jogo da Memória, em que os jogadoresprecisam virar duas cartas iguais. Eles colocam as cartas no chão, viradas para baixo, e fazemalgumas linhas ligando pares de cartas, usando giz, de modo que para qualquer par de cartas(A, B)existe uma e apenas uma sequência de cartas distintas que leva deAatéBatravés das linhas queeles desenharam. Com isso, ao virar duas cartas, o jogador ganha uma quantidade de pontos igualao tamanho da sequência de linhas entre as duas cartas, se elas forem iguais. Se forem diferentes,o jogador perde aquela quantidade de pontos.Pedro e Paulo, agora, estão estudando qual é a melhor estratégia para esse jogo e precisam da suaajuda para resolver uma tarefa especíca: dadas as ligações entre asNcartas, calcular a soma dostamanhos das sequências entre todos osN/2pares de cartas iguais!O jogo possuiNcartas, de índices1atéN. Cada carta possui agura de um número de1atéN/2desenhada. Exatamente duas cartas possuem agura de cada número entre1eN/2.
Entrada
A primeira linha da entrada contém o número de cartasN. A segunda linha da entrada contémNinteirosC
i,1≤i≤N, indicando qual número está anotado na carta de índicei. Cada uma dasN−1linhas seguintes contém dois númerosAeB, indicando que existe uma linha desenhada entreas cartas de índicesAeB.
Saída
Seu programa deve imprimir uma linha contendo um inteiro, a soma dos tamanhos das sequênciasentre todos osN/2pares de cartas iguais.
Restrições
•2≤N≤50000,Né par•1≤C
i≤N/2•1≤A≤Ne1≤B≤N
Informações sobre a Pontuação
•Em um conjunto de casos de teste valendo 50 pontos,N≤1000
Exemplos
Entrada62 2 1 1 3 31 23 46 52 63 6Saída3Olimpíada Brasileira de Informática – OBI2014 6
Entrada81 2 3 3 2 4 1 41 22 32 65 66 87 84 7Saída12