Olimpíada Brasileira de Informática – OBI20169
Ciclovias
Nome do arquivo:ciclovias.c,ciclovias.cpp,ciclovias.pas,ciclovias.java,ciclovias.jsouciclovias.pyA cidade de Nlogônia é mundialmente conhecida pelas suas iniciativas de preservação ambiental.Dentre elas, uma das que mais chama atenção é a existência de ciclovias em todas as ruas dacidade. Essa medida teve um sucesso tão grande, que agora a maioria dos moradores usa a bicicletadiariamente. Em Nlogônia, as interseções são numeradas de1atéN. Cada rua liga duas interseçõesAeBe possui uma ciclovia entreAeB. Um caminhoPde tamanhoKé denido como umasequência de interseçõesP
1, P2, ... , P K, tal que para todoi,1≤i < K, existe uma ciclovia entreP ieP
i+1. Arnaldo e Bernardo estavam passeando de bicileta pelas ruas de Nlognônia quando pensaramem um novo jogo. Nesse jogo, os dois partem de alguma interseçãoCe procuram o caminhoPdemaior tamanho que satisfaça a seguinte regra: as subsequênciasP
1, P3, P5, . . . , P 2x+1 eP 2, P4, P6, . . . , P 2x
da sequênciaPdevem ser ambas crescentes. Ganha o jogo aquele que encontrar o maior caminho.Bernardo te ligou pedindo ajuda para se preparar para o jogo. Com o mapa da cidade você deveencontrar o tamanho do maior caminho possível para todas as interseções iniciais possíveis, seguindoas restrições acima. No exemplo abaixo, o maior caminho possível para início na interseção1éP= (1,3,5,4,7)e para início na interseção5éP= (5,3,6)ouP= (5,4,7).
Entrada
A primeira linha contém dois inteirosNeM, representando respectivamente o número de interseçõese o número de ruas. AsMlinhas seguintes contém dois inteirosAeBindicando que existe umaciclovia entreAaB.
Saída
Seu programa deve produzir uma única linha, contendoNinteirosR 1, R2, ... R N, ondeR ié otamanho do maior caminho possível se o jogo começar na interseçãoi.
Restrições
•1≤N≤105.•0≤M≤N(N−1)2.•0≤M≤5×105.•A6=B.•1≤A, B≤N.•Não existem duas ciclovias iguais.Olimpíada Brasileira de Informática – OBI201610
Informações sobre a pontuação
•Em um conjunto de casos de teste equivalente a 20 pontos,N≤7.•Em um conjunto de casos de teste equivalente a 40 pontos,N≤100.•Em um conjunto de casos de teste equivalente a 60 pontos,N≤1000.
Exemplos
Entrada5 51 51 31 22 54 5Saída4 4 4 2 2
Entrada6 61 32 34 23 43 55 4Saída7 5 6 4 2 1
Entrada7 61 21 33 53 65 44 7Saída5 6 4 2 3 2 2